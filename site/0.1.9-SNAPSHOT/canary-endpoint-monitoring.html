<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2015-08-06
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20150806" />
    <meta http-equiv="Content-Language" content="en" />
    <title>AgileDev - Canary endpoint monitoring</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.3.0.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.3.0.min.js"></script>

    
            </head>
        <body class="topBarDisabled">
          
        
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                                                                                                <img src="images/UniKnow-logo.jpg"  alt="UniKnow"/>
                </div>
                      </div>
        <div class="pull-right">              <div id="bannerRight">
                <h2>AgileDev</h2>
                </div>
      </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 2015-08-06</li>
                  <li class="divider">|</li> <li id="projectVersion">Version: 0.1.9-SNAPSHOT</li>
                      
                
                    
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Guidelines</li>
                                
      <li>
    
                          <a href="developerSetup.html" title="Developers Setup">
          <i class="none"></i>
        Developers Setup</a>
            </li>
                  
      <li>
    
                          <a href="siteDocumentation.html" title="Site Documentation">
          <i class="none"></i>
        Site Documentation</a>
            </li>
                              <li class="nav-header">Documentation</li>
                                
      <li>
    
                          <a href="branchingModels.html" title="Branching Models">
          <i class="none"></i>
        Branching Models</a>
            </li>
                  
      <li>
    
                          <a href="javadoc-standards.html" title="Javadoc guidelines">
          <i class="none"></i>
        Javadoc guidelines</a>
            </li>
                                                                                                                                                                                                              
      <li>
    
                          <a href="software-design-principles.md" title="Software Design Principles">
          <i class="icon-chevron-down"></i>
        Software Design Principles</a>
                    <ul class="nav nav-list">
                      
      <li>
    
                          <a href="bdd.html" title="Behavior Driven Development">
          <i class="none"></i>
        Behavior Driven Development</a>
            </li>
                      
      <li>
    
                          <a href="code-reviews.html" title="Code Reviews">
          <i class="none"></i>
        Code Reviews</a>
            </li>
                      
      <li>
    
                          <a href="defensive-programming.html" title="Defensive Programming">
          <i class="none"></i>
        Defensive Programming</a>
            </li>
                      
      <li>
    
                          <a href="dbc.html" title="Design by Contract">
          <i class="none"></i>
        Design by Contract</a>
            </li>
                      
      <li>
    
                          <a href="intention_revealing_interfaces.html" title="Intention revealing interfaces">
          <i class="none"></i>
        Intention revealing interfaces</a>
            </li>
                      
      <li>
    
                          <a href="reactive-system.html" title="Reactive System">
          <i class="none"></i>
        Reactive System</a>
            </li>
                      
      <li>
    
                          <a href="semantic-versioning.html" title="Semantic versioning">
          <i class="none"></i>
        Semantic versioning</a>
            </li>
                      
      <li>
    
                          <a href="side_effect_free_functions.html" title="Side effect free functions">
          <i class="none"></i>
        Side effect free functions</a>
            </li>
                      
      <li>
    
                          <a href="specification-by-example.html" title="Specification by Example">
          <i class="none"></i>
        Specification by Example</a>
            </li>
              </ul>
        </li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
      <li>
    
                          <a href="patterns.html" title="Patterns">
          <i class="icon-chevron-down"></i>
        Patterns</a>
                    <ul class="nav nav-list">
                      
      <li>
    
                          <a href="api-gateway.html" title="API gateway">
          <i class="none"></i>
        API gateway</a>
            </li>
                                                                        
      <li>
    
                          <a href="automated-testing.html" title="Automated testing">
          <i class="icon-chevron-right"></i>
        Automated testing</a>
                  </li>
                      
      <li>
    
                          <a href="builder.html" title="Builder">
          <i class="none"></i>
        Builder</a>
            </li>
                      
      <li>
    
                          <a href="bulkheads.html" title="Bulkheads">
          <i class="none"></i>
        Bulkheads</a>
            </li>
                      
      <li>
    
                          <a href="cache.html" title="Caching">
          <i class="none"></i>
        Caching</a>
            </li>
                      
      <li>
    
                          <a href="circuit-breaker.html" title="Circuit Breaker">
          <i class="none"></i>
        Circuit Breaker</a>
            </li>
                      
      <li>
    
                          <a href="client-side-discovery.html" title="Client Side Discovery">
          <i class="none"></i>
        Client Side Discovery</a>
            </li>
                      
      <li>
    
                          <a href="cqrs.html" title="Command Query Responsibility Separation">
          <i class="none"></i>
        Command Query Responsibility Separation</a>
            </li>
                      
      <li>
    
                          <a href="deployment-microservices.html" title="Deployment microservices">
          <i class="none"></i>
        Deployment microservices</a>
            </li>
                                                                                                                                                                                                                                                                  
      <li>
    
                          <a href="ddd/introduction_ddd.html" title="Domain Driven Design">
          <i class="icon-chevron-right"></i>
        Domain Driven Design</a>
                  </li>
                                                                                                            
      <li>
    
                          <a href="eip.html" title="Enterprise Integration Pattern">
          <i class="icon-chevron-right"></i>
        Enterprise Integration Pattern</a>
                  </li>
                      
      <li>
    
                          <a href="exception-handling.html" title="Exception Handling">
          <i class="none"></i>
        Exception Handling</a>
            </li>
                      
      <li>
    
                          <a href="event-sourcing.html" title="Event Sourcing">
          <i class="none"></i>
        Event Sourcing</a>
            </li>
                      
      <li>
    
                          <a href="microservice-architecture.html" title="Microservice Architecture">
          <i class="none"></i>
        Microservice Architecture</a>
            </li>
                                                                                                                
      <li>
    
                          <a href="monitoring.html" title="Monitoring">
          <i class="icon-chevron-down"></i>
        Monitoring</a>
                    <ul class="nav nav-list">
                      
      <li class="active">
    
            <a href="#"><i class="none"></i>Canary endpoint monitoring</a>
          </li>
                      
      <li>
    
                          <a href="log-aggregation.html" title="Log aggregation">
          <i class="none"></i>
        Log aggregation</a>
            </li>
                      
      <li>
    
                          <a href="synthetic-monitoring.html" title="Synthetic monitoring">
          <i class="none"></i>
        Synthetic monitoring</a>
            </li>
              </ul>
        </li>
                      
      <li>
    
                          <a href="monolithic-architecture.html" title="Monolithic Architecture">
          <i class="none"></i>
        Monolithic Architecture</a>
            </li>
                      
      <li>
    
                          <a href="self-registration.html" title="Self registration">
          <i class="none"></i>
        Self registration</a>
            </li>
                      
      <li>
    
                          <a href="server-side-discovery.html" title="Server Side Discovery">
          <i class="none"></i>
        Server Side Discovery</a>
            </li>
                      
      <li>
    
                          <a href="service-connector.html" title="Service Connector">
          <i class="none"></i>
        Service Connector</a>
            </li>
                      
      <li>
    
                          <a href="service-registry.html" title="Service Registry">
          <i class="none"></i>
        Service Registry</a>
            </li>
                      
      <li>
    
                          <a href="service-statelessness.html" title="Service Statelessness">
          <i class="none"></i>
        Service Statelessness</a>
            </li>
                      
      <li>
    
                          <a href="srp.html" title="Single Responsibility Principle">
          <i class="none"></i>
        Single Responsibility Principle</a>
            </li>
                      
      <li>
    
                          <a href="system-of-record.html" title="System of Record">
          <i class="none"></i>
        System of Record</a>
            </li>
                      
      <li>
    
                          <a href="timeouts.html" title="Timeouts">
          <i class="none"></i>
        Timeouts</a>
            </li>
                      
      <li>
    
                          <a href="tcc.html" title="Try-Cancel/Confirm">
          <i class="none"></i>
        Try-Cancel/Confirm</a>
            </li>
                      
      <li>
    
                          <a href="uuid.html" title="UUID">
          <i class="none"></i>
        UUID</a>
            </li>
                      
      <li>
    
                          <a href="third-party-registration.html" title="3rd party registration">
          <i class="none"></i>
        3rd party registration</a>
            </li>
              </ul>
        </li>
                  
      <li>
    
                          <a href="Glossary.html" title="Glossary">
          <i class="none"></i>
        Glossary</a>
            </li>
                  
      <li>
    
                          <a href="abbreviations.html" title="Abbreviations">
          <i class="none"></i>
        Abbreviations</a>
            </li>
                              <li class="nav-header">Modules</li>
                                
      <li>
    
                          <a href="buildConfiguration/index.html" title="Build Configuration">
          <i class="none"></i>
        Build Configuration</a>
            </li>
                  
      <li>
    
                          <a href="index/index.html" title="Maven Site Indexer">
          <i class="none"></i>
        Maven Site Indexer</a>
            </li>
                  
      <li>
    
                          <a href="common/index.html" title="AgileDev common">
          <i class="none"></i>
        AgileDev common</a>
            </li>
                  
      <li>
    
                          <a href="parent/index.html" title="AgileDev parent POM">
          <i class="none"></i>
        AgileDev parent POM</a>
            </li>
                  
      <li>
    
                          <a href="parent/JUnitBDD/index.html" title="JUnit BDD">
          <i class="none"></i>
        JUnit BDD</a>
            </li>
                  
      <li>
    
                          <a href="parent/dbc4java/index.html" title="Design By Contracts for Java">
          <i class="none"></i>
        Design By Contracts for Java</a>
            </li>
                  
      <li>
    
                          <a href="parent/cucumber-reporting/index.html" title="Cucumber Reporting">
          <i class="none"></i>
        Cucumber Reporting</a>
            </li>
                  
      <li>
    
                          <a href="parent/cucumber-reporting-example/index.html" title="Cucumber Reporting example">
          <i class="none"></i>
        Cucumber Reporting example</a>
            </li>
                  
      <li>
    
                          <a href="parent/spring-cqrs/index.html" title="CQRS for Spring">
          <i class="none"></i>
        CQRS for Spring</a>
            </li>
                  
      <li>
    
                          <a href="parent/spring-event-sourcing/index.html" title="Event Sourcing for Spring">
          <i class="none"></i>
        Event Sourcing for Spring</a>
            </li>
                  
      <li>
    
                          <a href="parent/spring-tcc-transactions/index.html" title="Try Cancel/Commit transactions for Spring">
          <i class="none"></i>
        Try Cancel/Commit transactions for Spring</a>
            </li>
                  
      <li>
    
                          <a href="narayana-tomcat-listener/index.html" title="Narayana Tomcat listener">
          <i class="none"></i>
        Narayana Tomcat listener</a>
            </li>
                  
      <li>
    
                          <a href="parent/archimate/index.html" title="Tutorial ArchiMate">
          <i class="none"></i>
        Tutorial ArchiMate</a>
            </li>
                  
      <li>
    
                          <a href="parent/cqrs-eventsourcing/index.html" title="Tutorial regarding CQRS and Event sourcing">
          <i class="none"></i>
        Tutorial regarding CQRS and Event sourcing</a>
            </li>
                  
      <li>
    
                          <a href="parent/dbc/index.html" title="Tutorial Design by Contract">
          <i class="none"></i>
        Tutorial Design by Contract</a>
            </li>
                  
      <li>
    
                          <a href="parent/ddd/index.html" title="Tutorial Domain Driven Design">
          <i class="none"></i>
        Tutorial Domain Driven Design</a>
            </li>
                  
      <li>
    
                          <a href="parent/rest/index.html" title="Tutorial Rest">
          <i class="none"></i>
        Tutorial Rest</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                                                                                                                                                                        
      <li>
    
                          <a href="project-info.html" title="Project Information">
          <i class="icon-chevron-right"></i>
        Project Information</a>
                  </li>
            </ul>
                
                    
                
          <hr class="divider" />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <h1>Canary endpoint monitoring</h1>
<p>It is good practice - and often business requirement - to monitor web applications, middle-tier and shared services, to ensure that they are available and performing correctly. There are many factors that affect applications such as network latency, performance and availability of the underlying hardware and storage systems, and the network bandwidth between them. The service may fail entirely or partly due to any of these factors. Therefore, you must verify at regular intervals that the service is performing correctly to ensure the required level of availability.</p>
<p>To provide the functionality by which the application can be monitored one should implement an endpoint that performs the necessary checks and return an indication of its status. Such an endpoint, unlike other resources of a REST API, perform no business activity, but instead gathers status and latency of all dependencies of a service.</p>
<p>Checks that might be carried out by the monitoring code in the application include but not limited to:</p>

<ul>
  
<li>Checking storage or database for availability (and response time).</li>
  
<li>Checking external distributed caches.</li>
  
<li>Checking availability of Service bus</li>
  
<li>Checking other resources or services used by the application.</li>
</ul>
<p>The response code indicates the overall status of the application. If any of the dependencies has a non-success code, the returned status code will be non-success also. The payload contains the name of the dependencies it uses, and the status code that was returned by the canary endpoint of that particular service.</p>
<p>Implementation of the canary endpoint check is generally dependent on the underlying technology. For a cache service, it suffices to set a constant value and see it succeeding. For a SQL database a <tt>select 1;</tt> query is all that is needed. <i>Note that none of these are anywhere near a business activity, so that you could not, think that its success means your business is up and running.</i> A canary endpoint normally gets implemented as an HTTP <tt>GET</tt> call which returns a collection of connectivity check metrics.</p>
<p>Typical checks that should be performed by the monitoring tool include:</p>

<ul>
  
<li>Validating the response code. For example, an HTTP response of 200 (OK) indicates that the services dependencies are all ok.</li>
  
<li>Checking the content of the response to detect errors, even when a 200 (OK) status code is returned.</li>
</ul>
<div class="section">
<h2>Security of the canary endpoint.<a name="Security_of_the_canary_endpoint."></a></h2>
<p>Canary endpoints should be secured. A canary endpoint lists all internal dependencies, and potentially technologies of a system and this could be abused by hackers to target your system.</p></div>
<div class="section">
<h2>Performance impact.<a name="Performance_impact."></a></h2>
<p>Since canary endpoints do not trigger any business activity, its performance footprint should be minimal. However, since calling the canary endpoint generates a cascade of calls, calling all canary endpoints every few seconds might not be wise.</p></div>
<div class="section">
<h2>Related Patterns<a name="Related_Patterns"></a></h2>

<ul>
  
<li><a href="circuit-breaker">Circuit breaker</a> - Based on the status code as exposed by the canary endpoint the circuit breaker can allow requests to the service or block.</li>
</ul></div>
<div class="section">
<h2>See also<a name="See_also"></a></h2>

<ul>
  
<li><a class="externalLink" href="http://www.jayway.com/2014/07/22/spring-boot-custom-healthindicator/">Spring Boot custom HealthIndicator</a></li>
  
<li><a class="externalLink" href="https://docs.appdynamics.com/display/DASH/Learn+AppDynamics">AppDynamics</a> for monitoring tool.</li>
</ul></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
              <div class="row span12">Copyright &copy;                    2015
                        <a href="http://www.uniknow.org">UniKnow</a>.
            All Rights Reserved.      
                    
      </div>

        
        
                </div>
    </footer>
  </body>
</html>
