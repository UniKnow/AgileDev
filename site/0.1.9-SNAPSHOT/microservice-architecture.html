<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2015-06-23
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20150623" />
    <meta http-equiv="Content-Language" content="en" />
    <title>AgileDev - Microservice architecture</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.3.0.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.3.0.min.js"></script>

    
            </head>
        <body class="topBarDisabled">
          
        
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                                                                                                <img src="images/UniKnow-logo.jpg"  alt="UniKnow"/>
                </div>
                      </div>
        <div class="pull-right">              <div id="bannerRight">
                <h2>AgileDev</h2>
                </div>
      </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 2015-06-23</li>
                  <li class="divider">|</li> <li id="projectVersion">Version: 0.1.9-SNAPSHOT</li>
                      
                
                    
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Guidelines</li>
                                
      <li>
    
                          <a href="developerSetup.html" title="Developers Setup">
          <i class="none"></i>
        Developers Setup</a>
            </li>
                  
      <li>
    
                          <a href="siteDocumentation.html" title="Site Documentation">
          <i class="none"></i>
        Site Documentation</a>
            </li>
                              <li class="nav-header">Documentation</li>
                                
      <li>
    
                          <a href="branchingModels.html" title="Branching Models">
          <i class="none"></i>
        Branching Models</a>
            </li>
                                                                                                                                                        
      <li>
    
                          <a href="software-design-principles.md" title="Software Design Principles">
          <i class="icon-chevron-down"></i>
        Software Design Principles</a>
                    <ul class="nav nav-list">
                      
      <li>
    
                          <a href="bdd.html" title="Behavior Driven Development">
          <i class="none"></i>
        Behavior Driven Development</a>
            </li>
                      
      <li>
    
                          <a href="dbc.html" title="Design by Contract">
          <i class="none"></i>
        Design by Contract</a>
            </li>
                      
      <li>
    
                          <a href="intention_revealing_interfaces.html" title="Intention revealing interfaces">
          <i class="none"></i>
        Intention revealing interfaces</a>
            </li>
                      
      <li>
    
                          <a href="reactive-system.html" title="Reactive System">
          <i class="none"></i>
        Reactive System</a>
            </li>
                      
      <li>
    
                          <a href="semantic-versioning.html" title="Semantic versioning">
          <i class="none"></i>
        Semantic versioning</a>
            </li>
                      
      <li>
    
                          <a href="side_effect_free_functions.html" title="Side effect free functions">
          <i class="none"></i>
        Side effect free functions</a>
            </li>
              </ul>
        </li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
      <li>
    
                          <a href="patterns.html" title="Patterns">
          <i class="icon-chevron-down"></i>
        Patterns</a>
                    <ul class="nav nav-list">
                      
      <li>
    
                          <a href="api-gateway.html" title="API gateway">
          <i class="none"></i>
        API gateway</a>
            </li>
                                                                        
      <li>
    
                          <a href="automated-testing.html" title="Automated testing">
          <i class="icon-chevron-right"></i>
        Automated testing</a>
                  </li>
                      
      <li>
    
                          <a href="bulkheads.html" title="Bulkheads">
          <i class="none"></i>
        Bulkheads</a>
            </li>
                      
      <li>
    
                          <a href="cache.html" title="Caching">
          <i class="none"></i>
        Caching</a>
            </li>
                      
      <li>
    
                          <a href="circuit-breaker.html" title="Circuit Breaker">
          <i class="none"></i>
        Circuit Breaker</a>
            </li>
                      
      <li>
    
                          <a href="client-side-discovery.html" title="Client Side Discovery">
          <i class="none"></i>
        Client Side Discovery</a>
            </li>
                      
      <li>
    
                          <a href="cqrs.html" title="Command Query Responsibility Separation">
          <i class="none"></i>
        Command Query Responsibility Separation</a>
            </li>
                      
      <li>
    
                          <a href="deployment-microservices.html" title="Deployment microservices">
          <i class="none"></i>
        Deployment microservices</a>
            </li>
                                                                                                                                                                                                                                                                  
      <li>
    
                          <a href="ddd/introduction_ddd.html" title="Domain Driven Design">
          <i class="icon-chevron-right"></i>
        Domain Driven Design</a>
                  </li>
                                                                                                            
      <li>
    
                          <a href="eip.html" title="Enterprise Integration Pattern">
          <i class="icon-chevron-right"></i>
        Enterprise Integration Pattern</a>
                  </li>
                      
      <li>
    
                          <a href="exception-handling.html" title="Exception Handling">
          <i class="none"></i>
        Exception Handling</a>
            </li>
                      
      <li class="active">
    
            <a href="#"><i class="none"></i>Microservice Architecture</a>
          </li>
                      
      <li>
    
                          <a href="monolithic-architecture.html" title="Monolithic Architecture">
          <i class="none"></i>
        Monolithic Architecture</a>
            </li>
                      
      <li>
    
                          <a href="self-registration.html" title="Self registration">
          <i class="none"></i>
        Self registration</a>
            </li>
                      
      <li>
    
                          <a href="server-side-discovery.html" title="Server Side Discovery">
          <i class="none"></i>
        Server Side Discovery</a>
            </li>
                      
      <li>
    
                          <a href="service-connector.html" title="Service Connector">
          <i class="none"></i>
        Service Connector</a>
            </li>
                      
      <li>
    
                          <a href="service-registry.html" title="Service Registry">
          <i class="none"></i>
        Service Registry</a>
            </li>
                      
      <li>
    
                          <a href="service-statelessness.html" title="Service Statelessness">
          <i class="none"></i>
        Service Statelessness</a>
            </li>
                      
      <li>
    
                          <a href="srp.html" title="Single Responsibility Principle">
          <i class="none"></i>
        Single Responsibility Principle</a>
            </li>
                      
      <li>
    
                          <a href="system-of-record.html" title="System of Record">
          <i class="none"></i>
        System of Record</a>
            </li>
                      
      <li>
    
                          <a href="timeouts.html" title="Timeouts">
          <i class="none"></i>
        Timeouts</a>
            </li>
                      
      <li>
    
                          <a href="tcc.html" title="Try-Cancel/Confirm">
          <i class="none"></i>
        Try-Cancel/Confirm</a>
            </li>
                      
      <li>
    
                          <a href="uuid.html" title="UUID">
          <i class="none"></i>
        UUID</a>
            </li>
                      
      <li>
    
                          <a href="third-party-registration.html" title="3rd party registration">
          <i class="none"></i>
        3rd party registration</a>
            </li>
              </ul>
        </li>
                  
      <li>
    
                          <a href="Glossary.html" title="Glossary">
          <i class="none"></i>
        Glossary</a>
            </li>
                  
      <li>
    
                          <a href="abbreviations.html" title="Abbreviations">
          <i class="none"></i>
        Abbreviations</a>
            </li>
                              <li class="nav-header">Modules</li>
                                
      <li>
    
                          <a href="buildConfiguration/index.html" title="Build Configuration">
          <i class="none"></i>
        Build Configuration</a>
            </li>
                  
      <li>
    
                          <a href="index/index.html" title="Maven Site Indexer">
          <i class="none"></i>
        Maven Site Indexer</a>
            </li>
                  
      <li>
    
                          <a href="common/index.html" title="AgileDev common">
          <i class="none"></i>
        AgileDev common</a>
            </li>
                  
      <li>
    
                          <a href="parent/index.html" title="AgileDev parent POM">
          <i class="none"></i>
        AgileDev parent POM</a>
            </li>
                  
      <li>
    
                          <a href="parent/JUnitBDD/index.html" title="JUnit BDD">
          <i class="none"></i>
        JUnit BDD</a>
            </li>
                  
      <li>
    
                          <a href="parent/dbc4java/index.html" title="Design By Contracts for Java">
          <i class="none"></i>
        Design By Contracts for Java</a>
            </li>
                  
      <li>
    
                          <a href="parent/cucumber-reporting/index.html" title="Cucumber Reporting">
          <i class="none"></i>
        Cucumber Reporting</a>
            </li>
                  
      <li>
    
                          <a href="parent/cucumber-reporting-example/index.html" title="Cucumber Reporting example">
          <i class="none"></i>
        Cucumber Reporting example</a>
            </li>
                  
      <li>
    
                          <a href="parent/archimate/index.html" title="Tutorial ArchiMate">
          <i class="none"></i>
        Tutorial ArchiMate</a>
            </li>
                  
      <li>
    
                          <a href="parent/dbc/index.html" title="Tutorial Design by Contract">
          <i class="none"></i>
        Tutorial Design by Contract</a>
            </li>
                  
      <li>
    
                          <a href="parent/ddd/index.html" title="Tutorial Domain Driven Design">
          <i class="none"></i>
        Tutorial Domain Driven Design</a>
            </li>
                  
      <li>
    
                          <a href="parent/rest/index.html" title="Tutorial Rest">
          <i class="none"></i>
        Tutorial Rest</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                                                                                                                                                                        
      <li>
    
                          <a href="project-info.html" title="Project Information">
          <i class="icon-chevron-right"></i>
        Project Information</a>
                  </li>
            </ul>
                
                    
                
          <hr class="divider" />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <h1>Microservice architecture</h1>
<p>A microservice architecture is the natural consequence of applying the single responsibility principle at architectural level. Within a microservice architecture the functionality is decomposed in a set of collaborating services and the <a href="scale-cube.html">scale cube</a> is applied. Services communicate with each other either using synchronous protocols like HTTP/REST or asynchronous protocols such as AMQP/JMS. In this way, business domain concepts are modelled as resources with one or more of these managed by a microservice. Since a business request can span multiple microservices separated by network partitions, it is important to consider possible failures in the system. Techniques such as timeouts, <a href="circuit-breaker.md">circuit breakers</a>, <a href="bulkheads.md">bulkheads</a> can help to maintain overall system uptime in spite of outage.</p>
<p>Often microservices display similar internal structure consisting of some or all of the layers as shown below.</p>
<p><img src="images/microservices-internal-structure.png" alt="microservices internal structure" /></p>

<ul>
  
<li>Resources act as a mapper between the application protocol as exposed by the micro service and messages to the <a href="ddd/services.md">services</a>/<a href="ddd/entities.md">entities</a> that are representing the domain. Typically, they are thin, responsible for sanity checking the request, and providing a protocol specific response according to the outcome of the request. If we for example expose the resources via REST and follow internally the <a href="cqrs.md">CQRS</a> approach, this layer would be responsible for converting the HTTP REST request into a <tt>Command</tt>.</li>
  
<li>The microservice logic resides in the <a href="ddd/domain-model.md">domain model</a>. <a href="ddd/services.md">Services</a> coordinate across multiple domain activities, whilst <a href="ddd/repositories.md">repositories</a> act on collections of domain entities and are often persistent. When a resource receives a request and has validated it, it either directly access the domain model, or, if many entities must be coordinated, it delegates the request to a service.</li>
  
<li>If a service has another service as a collaborator, some logic is needed to communicate with the external service. A <a href="service-connector.md">service connector</a> encapsulates message passing with a remote service, marshalling requests and responses from and to other services. Service connectors should be resilient to outage of remote components.</li>
</ul>
<p>Normally services are developed independently from another. Typically, a team will act as guardian to one or more microservices,</p>
<p>Each service has its own storage in order to decouple from other services. When necessary, consistency between services is maintained using application events.</p>
<p>Following this approach has a number of benefits:</p>

<ul>
  
<li>Each service is relatively small
  
<ul>
    
<li>Easier for developers to understand.</li>
    
<li>The web container starts fast, which makes developers more productive and speed up deployments.</li>
  </ul></li>
  
<li>Each service can be deployed independently of other services; e.g. easier to deploy new versions of services frequently.</li>
  
<li>Easier to scale development. It enables to organize the development effort around multiple teams. Each team can develop, deploy, and scale their service independently of all other teams.</li>
  
<li>Improved fault isolation.</li>
  
<li>Each service can be developed and deployed independently.</li>
  
<li>Eliminates long term commitment to a technology stack.</li>
</ul>
<p>There are however also a number of drawbacks:</p>

<ul>
  
<li>Developers must deal with the additional complexity of creating distributed systems.
  
<ul>
    
<li>Testing is more difficult.</li>
    
<li>Developers must implement the inter-service communication mechanism</li>
    
<li>Implementing use cases that span multiple services without using distributed transactions is difficult (See <a href="tcc.md">Try-Cancel/Confirm</a>)</li>
    
<li>Implementing uses cases that span multiple services requires careful coordination between the teams.</li>
  </ul></li>
  
<li>Deployment complexity in production; there is additional operational complexity of deploying and managing a system comprised of many different services.</li>
  
<li>Increased memory consumption. The microservice architecture replaces a monolithic application with N service instances. If each service runs in its own JVM (which is usually necessary to isolate instances) there is a overhead of N-1 JVM runtimes. Moreover, if each service runs on its own VM the overhead is even higher.</li>
</ul>
<p>A challenge is deciding how to partition the system into microservices. One approach is to partition services by use case. We could for example have a micro service shipping within a partitioned e-commerce application that is responsible for shipping completed orders. Another approach is to partition by <a href="ddd/entities.md">entity</a>. This kind of service is responsible for all operations that operate on entities of a given type.</p>
<p>Ideally, each service should have only a small set of responsibilities. The <a href="srp.html">Single Responsible Principle</a> states that every class should have responsibility over a single part of the functionality provided by the software, and that responsibility should be entirely encapsulated by the class. It makes sense to apply this principle to microservice design as well.</p>
<div class="section">
<h2>MicroService naming guidelines<a name="MicroService_naming_guidelines"></a></h2>
<p>There isn&#x2019;t a really straight forward approach regarding the naming of microservices but the following guidelines should help in creating a consistency in the naming of the microservices.</p>

<ul>
  
<li><i>Use camel case for microservice name</i></li>
  
<li><i>Don&#x2019;t reveal implementation details in the microservice name</i> - This not only has the potential to lead to confusion when you change the implementation of the microservice, but is also a security risk as it gives the microservice consumer an insight in how the microservice may be implemented which they may be able to exploit.</li>
  
<li><i>Don&#x2019;t include protocol information in the microservice name</i> - This is generally unnecessary as the service advertise itself at a particular endpoint which clearly defines the protocol to be used.</li>
  
<li><i>Don&#x2019;t include the word service in the microservice name</i></li>
  
<li><i>Don&#x2019;t include a version in the microservice name</i></li>
  
<li><i>Name microservice to entity at which it operates</i> - Microservices which operate on a specific entity should be named after the entity. For example if service that operates on customers may be simple named <tt>Customer</tt>.</li>
  
<li><i>Name microservice to functionality it performs</i> - Certain microservices are taking care of certain processes and therefore the use of verbs in the service name is common. For example a service that orchestrates the device registration could be called <tt>RegisterDevice</tt>.</li>
</ul>
<p>Naming conventions may seem trivial at first, but as the number of microservices grow, so will the potential to reuse. In larger organizations, this means that more and more architects, analysts, and developers are discovering and then incorporating foreign services within their solution designs. The effort required to establish a consistent level of clarity across all microservices pays off quickly when interoperability and reuse opportunities are more easily recognized and seized.</p></div>
<div class="section">
<h2>TODO<a name="TODO"></a></h2>

<ul>
  
<li>Check whether OSGI could help with decreasing memory consumption.</li>
</ul></div>
<div class="section">
<h2>Related Patterns<a name="Related_Patterns"></a></h2>

<ul>
  
<li><a href="API-gateway">API Gateway</a> - defines how clients access the services in a microservice architecture.</li>
  
<li><a href="client-side-discover">Client side discovery</a> and <a href="server-side-discover">Service side discovery</a> - Patterns used to route requests for a client to an available microservice.</li>
  
<li><a href="cqrs.md">Command Query Response Seperation</a> - Helps develop scalable, extensible and maintainable applications.</li>
  
<li><a href="ddd/introduction_ddd.md">Domain Driven Design</a> - Set of patterns for building enterprise applications based on the domain model.</li>
  
<li><a href="monolithic-architecture">Monolithic Architecture</a> - alternative to the monolithic architecture.</li>
  
<li><a href="service-connector.md">Service Connector</a> - Provide high level interface that hides implementation details regarding communication, thereby making the use of the microservice easier.</li>
  
<li><a href="service-statelessness">Service Statelessness</a> - To have services scalable we should attempt to make them statelessness.</li>
</ul></div>
<div class="section">
<h2>See also<a name="See_also"></a></h2>

<ul>
  
<li><a class="externalLink" href="https://docs.jboss.org/author/display/JBOSGI/User+Guide">JBOSS OSGI User guide</a> - Guide explaining how to deploy application as OSGI bundle on JBOSS server.</li>
</ul></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
              <div class="row span12">Copyright &copy;                    2015
                        <a href="http://www.uniknow.org">UniKnow</a>.
            All Rights Reserved.      
                    
      </div>

        
        
                </div>
    </footer>
  </body>
</html>
