<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2015-05-06
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20150506" />
    <meta http-equiv="Content-Language" content="en" />
    <title>REST tutorial - RESTful Web services</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.3.0.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.3.0.min.js"></script>

    
            </head>
        <body class="topBarDisabled">
          
        
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                                  <a href="www.uniknow.com/" id="bannerLeft">
                                                                                                <img src="images/UniKnow-logo.jpg"  alt="Company name"/>
                </a>
                      </div>
        <div class="pull-right">              <div id="bannerRight">
                <h2>Tutorial Rest</h2>
                </div>
      </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 2015-05-06</li>
                  <li class="divider">|</li> <li id="projectVersion">Version: 0.1.9-SNAPSHOT</li>
                      
                
                    
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Documentation</li>
                                
      <li class="active">
    
            <a href="#"><i class="none"></i>Introduction</a>
          </li>
            </ul>
                
                    
                
          <hr class="divider" />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <h1>RESTful Web services</h1>
<p>Within this tutorial we will create a simple restful blogging system.</p>
<p>When providing services in a specific technology (jax-ws, jax-rs, &#x2026;), it&#x2019;s wise to avoid mixing the business logic of your service and the technology you are using to expose it to the outside world. This separation facilitates easier adaption of newer technologies and makes it easier to maintain and test services.</p>
<p>The project is separated in 2 packages.</p>

<ol style="list-style-type: decimal">
  
<li>api - defining the interfaces that are exposed</li>
  
<li>impl - Implementation of the interfaces</li>
</ol>
<p>The <tt>api</tt> package contains the business interface <tt>BlogService</tt> within the package <tt>org.uniknow.agiledev.tutorial.rest.api</tt>, and the technology specific interface <tt>BlogRestService</tt> within the &#x2019;<tt>jaxrs</tt> package containing JAX-RS annotations. The <tt>jaxrs</tt> package also contains the DTO (Data Transfer Objects) classes required to provide and/or consume the REST services.</p>
<div class="section">
<h2>Versioning<a name="Versioning"></a></h2>
<p>Versioning of the REST service will be done via custom <tt>Accept</tt> headers containing custom media types (such as <tt>application/vnd.agiledev.blog.v1+xml</tt>) instead of using one of the defined media types. Within the <tt>BlogRestService</tt> the custom consume and produce media types are defined</p>

<div class="source">
<pre>/**
 * Version 1 of Blog Rest Service
 */
package org.uniknow.agiledev.tutorial.rest.api.jaxrs.V1;

@Path(&quot;/blog&quot;)
@Consumes({ &quot;application/agiledev.blog.v1+xml&quot;,
        &quot;application/agiledev.blog.v1+json&quot; })
@Produces({ &quot;application/agiledev.blog.v1+xml&quot;,
        &quot;application/agiledev.blog.v1+json&quot; })
public interface BlogRestService {
    ...
}
</pre></div>
<p>When the entities change in a non compatible way (V2), a new version of the API can co-exist with the first version, given that the entity/DTO namespace is also changed. The newer API will have its own interface and use an updated media type:</p>

<div class="source">
<pre>/**
 * Version 2 of Blog Rest Service
 */
package org.uniknow.agiledev.tutorial.rest.api.jaxrs.V2;

@Path(&quot;/blog&quot;)
@Consumes({&quot;application/agiledev.blog.v2+xml&quot;, &quot;application/agiledev.blog.v2+json&quot; })
@Produces({&quot;application/agiledev.blog.v2+xml&quot;, &quot;application/agiledev.blog.v2+json&quot; })
</pre></div>
<p>and the namespace would become something like this (<tt>package-info.java</tt>):</p>

<div class="source">
<pre>@XmlSchema(namespace = &quot;http://www.uniknow.org/rest/blog/api/v2&quot;,
    elementFormDefault = XmlNsForm.QUALIFIED, xmlns = { @XmlNs(prefix = &quot;api&quot;,
        namespaceURI = &quot;http://www.uniknow.org/rest/blog/api/v2&quot;) })
package org.uniknow.agiledev.tutorial.rest.api.jaxrs.V2;

import javax.xml.bind.annotation.*;
</pre></div>
<p>Now the client is required to specify an <tt>Accept</tt> header when using the API. Whe can remedy this by adding default media types to the latest version of our API. This way clients invorking the API without an <tt>Accept</tt> header will be working with the latest version.</p>
<p>@Path(&#x201c;/blog&#x201d;)  @Consumes({ MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON,  &#x201c;application/agiledev.blog.v2+xml&#x201d;, &#x201c;application/agiledev.blog.v2+json&#x201d; })  @Produces({ MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON,  &#x201c;application/agiledev.blog.v2+xml&#x201d;, &#x201c;application/agiledev.blog.v2+json&#x201d; })</p></div>
<div class="section">
<h2>Running the example application<a name="Running_the_example_application"></a></h2>
<p>To build and run the application perform:</p>

<div class="source">
<pre>mvn clean install cargo:run
</pre></div>
<p>Once the application is running the Rest services can be invoked by using for example the URL <a class="externalLink" href="http://localhost:8080/rest/api/blog/posts">http://localhost:8080/rest/api/blog/posts</a> and include header param <tt>Accept</tt> with for example value <tt>application/agiledev.blog.v2+json</tt>. If used without <tt>Accept</tt> header the response will be of content type <tt>application/xml</tt>.</p>
<p><i>Resources:</i></p>

<ul>
  
<li><a class="externalLink" href="http://codebias.blogspot.cz/2013/03/how-to-restful-web-services-with-jax-rs.html">http://codebias.blogspot.cz/2013/03/how-to-restful-web-services-with-jax-rs.html</a></li>
  
<li><a class="externalLink" href="http://codebias.blogspot.nl/2014/03/versioning-rest-apis-with-custom-accept.html">http://codebias.blogspot.nl/2014/03/versioning-rest-apis-with-custom-accept.html</a></li>
  
<li><a class="externalLink" href="http://esofthead.com/restful-application-spring-resteasy/">http://esofthead.com/restful-application-spring-resteasy/</a></li>
</ul></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
              <div class="row span12">Copyright &copy;                    2015
                        <a href="http://www.uniknow.org">UniKnow</a>.
            All Rights Reserved.      
                    
      </div>

        
        
                </div>
    </footer>
  </body>
</html>
