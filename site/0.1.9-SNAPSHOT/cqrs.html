<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2015-05-13
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20150513" />
    <meta http-equiv="Content-Language" content="en" />
    <title>AgileDev - Command Query Responsibility Segregation</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.3.0.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.3.0.min.js"></script>

    
            </head>
        <body class="topBarDisabled">
          
        
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                                                                                                <img src="images/UniKnow-logo.jpg"  alt="UniKnow"/>
                </div>
                      </div>
        <div class="pull-right">              <div id="bannerRight">
                <h2>AgileDev</h2>
                </div>
      </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 2015-05-13</li>
                  <li class="divider">|</li> <li id="projectVersion">Version: 0.1.9-SNAPSHOT</li>
                      
                
                    
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Guidelines</li>
                                
      <li>
    
                          <a href="developerSetup.html" title="Developers Setup">
          <i class="none"></i>
        Developers Setup</a>
            </li>
                  
      <li>
    
                          <a href="siteDocumentation.html" title="Site Documentation">
          <i class="none"></i>
        Site Documentation</a>
            </li>
                              <li class="nav-header">Best Practices</li>
                                
      <li>
    
                          <a href="branchingModels.html" title="Branching Models">
          <i class="none"></i>
        Branching Models</a>
            </li>
                              <li class="nav-header">Documentation</li>
                                
      <li class="active">
    
            <a href="#"><i class="none"></i>CQRS clarified</a>
          </li>
                  
      <li>
    
                          <a href="Glossary.html" title="Glossary">
          <i class="none"></i>
        Glossary</a>
            </li>
                  
      <li>
    
                          <a href="abbreviations.html" title="Abbreviations">
          <i class="none"></i>
        Abbreviations</a>
            </li>
                              <li class="nav-header">Modules</li>
                                
      <li>
    
                          <a href="buildConfiguration/index.html" title="Build Configuration">
          <i class="none"></i>
        Build Configuration</a>
            </li>
                  
      <li>
    
                          <a href="index/index.html" title="Maven Site Indexer">
          <i class="none"></i>
        Maven Site Indexer</a>
            </li>
                  
      <li>
    
                          <a href="common/index.html" title="AgileDev common">
          <i class="none"></i>
        AgileDev common</a>
            </li>
                  
      <li>
    
                          <a href="parent/index.html" title="AgileDev parent POM">
          <i class="none"></i>
        AgileDev parent POM</a>
            </li>
                  
      <li>
    
                          <a href="parent/JUnitBDD/index.html" title="JUnit BDD">
          <i class="none"></i>
        JUnit BDD</a>
            </li>
                  
      <li>
    
                          <a href="parent/dbc4java/index.html" title="Design By Contracts for Java">
          <i class="none"></i>
        Design By Contracts for Java</a>
            </li>
                  
      <li>
    
                          <a href="parent/cucumber-reporting/index.html" title="Cucumber Reporting">
          <i class="none"></i>
        Cucumber Reporting</a>
            </li>
                  
      <li>
    
                          <a href="parent/cucumber-reporting-example/index.html" title="Cucumber Reporting example">
          <i class="none"></i>
        Cucumber Reporting example</a>
            </li>
                  
      <li>
    
                          <a href="parent/cqrs/index.html" title="Tutorial Command Query Responsibility Segregation">
          <i class="none"></i>
        Tutorial Command Query Responsibility Segregation</a>
            </li>
                  
      <li>
    
                          <a href="parent/dbc/index.html" title="Tutorial Design by Contract">
          <i class="none"></i>
        Tutorial Design by Contract</a>
            </li>
                  
      <li>
    
                          <a href="parent/ddd/index.html" title="Tutorial Domain Driven Design">
          <i class="none"></i>
        Tutorial Domain Driven Design</a>
            </li>
                  
      <li>
    
                          <a href="parent/rest/index.html" title="Tutorial Rest">
          <i class="none"></i>
        Tutorial Rest</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                                                                                                                                                                        
      <li>
    
                          <a href="project-info.html" title="Project Information">
          <i class="icon-chevron-right"></i>
        Project Information</a>
                  </li>
            </ul>
                
                    
                
          <hr class="divider" />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <h1>Command Query Responsibility Segregation</h1>
<p>CQRS stands for Command Query Responsibility Segregation and helps developers to develop scalable, extensible and maintainable applications. At its hearth the pattern makes a distinction between the model in which information is updated and the model from which information is read. Following the vocabulary of <i>Command Query Separation</i> the models are called Command and Query. The rationale behind this separation is that for many problems, particularly in complicated domains, having the same conceptual model for updating information and reading information leads to a complex model that does neither well.</p>
<p>The models may share the same database, in which case the database acts as the communication between the two models, but they may also use separate databases, making the query side database a real-time reporting database. In later case there needs to be some communication mechanism between the two models, or their databases. Commonly this communication is realized by events.</p>
<div class="section">
<h2>Querying<a name="Querying"></a></h2>
<p>A query returns data and does not alter the state of the model. Once the data has been been retrieved by an actor, that same data may have been changed by another actor, in other words it is stale. If the data we are going to return to actors is stale anyway, is it really necessary to go to the master database and get it from there? Why transform the persisted data into entities if we just want data, not any rule preserving behavior? Why transform those entities to DTOs to transfer them across.</p>
<p>In short, it looks like we are doing a lot of unnecessary work. So why not creating a additional model, (whose data can be a bit out of sync), that matches the DTOs as they are expected by the requester. As data store you can use a regular database but that is not mandatory.</p></div>
<div class="section">
<h2>Commands<a name="Commands"></a></h2>
<p>A command changes the state of an entity within the command model. A command may be accepted or rejected. An accepted command leads to zero or more events being emitted to incorporate new fact into the system. A rejected command leads to some kind of exception.</p>
<p>One should regard a command as a request to perform a unit of work which is not depending on anything else.</p></div>
<div class="section">
<h2>Domain event<a name="Domain_event"></a></h2>
<p>In CQRS, domain events are the source all changes in the query model. When a command is executed, it will change state of one or more entities within the command model. As a result of these changes, one or more events are dispatched. The events are picked up by the event handlers of the query model and those update the query model.</p></div>
<div class="section">
<h2>When to use CQRS.<a name="When_to_use_CQRS."></a></h2>
<p>Like any pattern, CQRS is useful in some places and in others not. Many systems do fit a CRUD model, and should be done in that style. In particular CQRS should only be used on specific portions of a system (Bounded context in DDD lingo) and not to the system as whole; e.g. each bounded context needs its own decision on how it should be modeled.</p>
<p>So far there are the following benefits:</p>

<ul>
  
<li>Handling complexity - a complex domain may be easier to tackle by using CQRS.</li>
  
<li>Handling high performance applications - CQRS allows you to separate the load from reads and writes allowing you to scale each independently.</li>
</ul></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
              <div class="row span12">Copyright &copy;                    2015
                        <a href="http://www.uniknow.org">UniKnow</a>.
            All Rights Reserved.      
                    
      </div>

        
        
                </div>
    </footer>
  </body>
</html>
