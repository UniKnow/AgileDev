<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2015-07-30
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20150730" />
    <meta http-equiv="Content-Language" content="en" />
    <title>AgileDev - Cache</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.3.0.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.3.0.min.js"></script>

    
            </head>
        <body class="topBarDisabled">
          
        
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                                                                                                <img src="images/UniKnow-logo.jpg"  alt="UniKnow"/>
                </div>
                      </div>
        <div class="pull-right">              <div id="bannerRight">
                <h2>AgileDev</h2>
                </div>
      </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 2015-07-30</li>
                  <li class="divider">|</li> <li id="projectVersion">Version: 0.1.9-SNAPSHOT</li>
                      
                
                    
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Guidelines</li>
                                
      <li>
    
                          <a href="developerSetup.html" title="Developers Setup">
          <i class="none"></i>
        Developers Setup</a>
            </li>
                  
      <li>
    
                          <a href="siteDocumentation.html" title="Site Documentation">
          <i class="none"></i>
        Site Documentation</a>
            </li>
                              <li class="nav-header">Documentation</li>
                                
      <li>
    
                          <a href="branchingModels.html" title="Branching Models">
          <i class="none"></i>
        Branching Models</a>
            </li>
                  
      <li>
    
                          <a href="javadoc-standards.html" title="Javadoc guidelines">
          <i class="none"></i>
        Javadoc guidelines</a>
            </li>
                                                                                                                                                                                            
      <li>
    
                          <a href="software-design-principles.md" title="Software Design Principles">
          <i class="icon-chevron-down"></i>
        Software Design Principles</a>
                    <ul class="nav nav-list">
                      
      <li>
    
                          <a href="bdd.html" title="Behavior Driven Development">
          <i class="none"></i>
        Behavior Driven Development</a>
            </li>
                      
      <li>
    
                          <a href="code-reviews.html" title="Code Reviews">
          <i class="none"></i>
        Code Reviews</a>
            </li>
                      
      <li>
    
                          <a href="defensive-programming.html" title="Defensive Programming">
          <i class="none"></i>
        Defensive Programming</a>
            </li>
                      
      <li>
    
                          <a href="dbc.html" title="Design by Contract">
          <i class="none"></i>
        Design by Contract</a>
            </li>
                      
      <li>
    
                          <a href="intention_revealing_interfaces.html" title="Intention revealing interfaces">
          <i class="none"></i>
        Intention revealing interfaces</a>
            </li>
                      
      <li>
    
                          <a href="reactive-system.html" title="Reactive System">
          <i class="none"></i>
        Reactive System</a>
            </li>
                      
      <li>
    
                          <a href="semantic-versioning.html" title="Semantic versioning">
          <i class="none"></i>
        Semantic versioning</a>
            </li>
                      
      <li>
    
                          <a href="side_effect_free_functions.html" title="Side effect free functions">
          <i class="none"></i>
        Side effect free functions</a>
            </li>
              </ul>
        </li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
      <li>
    
                          <a href="patterns.html" title="Patterns">
          <i class="icon-chevron-down"></i>
        Patterns</a>
                    <ul class="nav nav-list">
                      
      <li>
    
                          <a href="api-gateway.html" title="API gateway">
          <i class="none"></i>
        API gateway</a>
            </li>
                                                                        
      <li>
    
                          <a href="automated-testing.html" title="Automated testing">
          <i class="icon-chevron-right"></i>
        Automated testing</a>
                  </li>
                      
      <li>
    
                          <a href="builder.html" title="Builder">
          <i class="none"></i>
        Builder</a>
            </li>
                      
      <li>
    
                          <a href="bulkheads.html" title="Bulkheads">
          <i class="none"></i>
        Bulkheads</a>
            </li>
                      
      <li class="active">
    
            <a href="#"><i class="none"></i>Caching</a>
          </li>
                      
      <li>
    
                          <a href="circuit-breaker.html" title="Circuit Breaker">
          <i class="none"></i>
        Circuit Breaker</a>
            </li>
                      
      <li>
    
                          <a href="client-side-discovery.html" title="Client Side Discovery">
          <i class="none"></i>
        Client Side Discovery</a>
            </li>
                      
      <li>
    
                          <a href="cqrs.html" title="Command Query Responsibility Separation">
          <i class="none"></i>
        Command Query Responsibility Separation</a>
            </li>
                      
      <li>
    
                          <a href="deployment-microservices.html" title="Deployment microservices">
          <i class="none"></i>
        Deployment microservices</a>
            </li>
                                                                                                                                                                                                                                                                  
      <li>
    
                          <a href="ddd/introduction_ddd.html" title="Domain Driven Design">
          <i class="icon-chevron-right"></i>
        Domain Driven Design</a>
                  </li>
                                                                                                            
      <li>
    
                          <a href="eip.html" title="Enterprise Integration Pattern">
          <i class="icon-chevron-right"></i>
        Enterprise Integration Pattern</a>
                  </li>
                      
      <li>
    
                          <a href="exception-handling.html" title="Exception Handling">
          <i class="none"></i>
        Exception Handling</a>
            </li>
                      
      <li>
    
                          <a href="microservice-architecture.html" title="Microservice Architecture">
          <i class="none"></i>
        Microservice Architecture</a>
            </li>
                                                                                                      
      <li>
    
                          <a href="monitoring.html" title="Monitoring">
          <i class="icon-chevron-down"></i>
        Monitoring</a>
                    <ul class="nav nav-list">
                      
      <li>
    
                          <a href="canary-endpoint-monitoring.html" title="Canary endpoint monitoring">
          <i class="none"></i>
        Canary endpoint monitoring</a>
            </li>
                      
      <li>
    
                          <a href="log-aggregation.html" title="Log aggregation">
          <i class="none"></i>
        Log aggregation</a>
            </li>
                      
      <li>
    
                          <a href="synthetic-monitoring.html" title="Synthetic monitoring">
          <i class="none"></i>
        Synthetic monitoring</a>
            </li>
              </ul>
        </li>
                      
      <li>
    
                          <a href="monolithic-architecture.html" title="Monolithic Architecture">
          <i class="none"></i>
        Monolithic Architecture</a>
            </li>
                      
      <li>
    
                          <a href="self-registration.html" title="Self registration">
          <i class="none"></i>
        Self registration</a>
            </li>
                      
      <li>
    
                          <a href="server-side-discovery.html" title="Server Side Discovery">
          <i class="none"></i>
        Server Side Discovery</a>
            </li>
                      
      <li>
    
                          <a href="service-connector.html" title="Service Connector">
          <i class="none"></i>
        Service Connector</a>
            </li>
                      
      <li>
    
                          <a href="service-registry.html" title="Service Registry">
          <i class="none"></i>
        Service Registry</a>
            </li>
                      
      <li>
    
                          <a href="service-statelessness.html" title="Service Statelessness">
          <i class="none"></i>
        Service Statelessness</a>
            </li>
                      
      <li>
    
                          <a href="srp.html" title="Single Responsibility Principle">
          <i class="none"></i>
        Single Responsibility Principle</a>
            </li>
                      
      <li>
    
                          <a href="system-of-record.html" title="System of Record">
          <i class="none"></i>
        System of Record</a>
            </li>
                      
      <li>
    
                          <a href="timeouts.html" title="Timeouts">
          <i class="none"></i>
        Timeouts</a>
            </li>
                      
      <li>
    
                          <a href="tcc.html" title="Try-Cancel/Confirm">
          <i class="none"></i>
        Try-Cancel/Confirm</a>
            </li>
                      
      <li>
    
                          <a href="uuid.html" title="UUID">
          <i class="none"></i>
        UUID</a>
            </li>
                      
      <li>
    
                          <a href="third-party-registration.html" title="3rd party registration">
          <i class="none"></i>
        3rd party registration</a>
            </li>
              </ul>
        </li>
                  
      <li>
    
                          <a href="Glossary.html" title="Glossary">
          <i class="none"></i>
        Glossary</a>
            </li>
                  
      <li>
    
                          <a href="abbreviations.html" title="Abbreviations">
          <i class="none"></i>
        Abbreviations</a>
            </li>
                              <li class="nav-header">Modules</li>
                                
      <li>
    
                          <a href="buildConfiguration/index.html" title="Build Configuration">
          <i class="none"></i>
        Build Configuration</a>
            </li>
                  
      <li>
    
                          <a href="index/index.html" title="Maven Site Indexer">
          <i class="none"></i>
        Maven Site Indexer</a>
            </li>
                  
      <li>
    
                          <a href="common/index.html" title="AgileDev common">
          <i class="none"></i>
        AgileDev common</a>
            </li>
                  
      <li>
    
                          <a href="parent/index.html" title="AgileDev parent POM">
          <i class="none"></i>
        AgileDev parent POM</a>
            </li>
                  
      <li>
    
                          <a href="parent/JUnitBDD/index.html" title="JUnit BDD">
          <i class="none"></i>
        JUnit BDD</a>
            </li>
                  
      <li>
    
                          <a href="parent/dbc4java/index.html" title="Design By Contracts for Java">
          <i class="none"></i>
        Design By Contracts for Java</a>
            </li>
                  
      <li>
    
                          <a href="parent/cucumber-reporting/index.html" title="Cucumber Reporting">
          <i class="none"></i>
        Cucumber Reporting</a>
            </li>
                  
      <li>
    
                          <a href="parent/cucumber-reporting-example/index.html" title="Cucumber Reporting example">
          <i class="none"></i>
        Cucumber Reporting example</a>
            </li>
                  
      <li>
    
                          <a href="parent/spring-tcc-transactions/index.html" title="Try Cancel/Commit transactions for Spring">
          <i class="none"></i>
        Try Cancel/Commit transactions for Spring</a>
            </li>
                  
      <li>
    
                          <a href="narayana-tomcat-listener/index.html" title="Narayana Tomcat listener">
          <i class="none"></i>
        Narayana Tomcat listener</a>
            </li>
                  
      <li>
    
                          <a href="parent/archimate/index.html" title="Tutorial ArchiMate">
          <i class="none"></i>
        Tutorial ArchiMate</a>
            </li>
                  
      <li>
    
                          <a href="parent/cqrs-eventsourcing/index.html" title="Tutorial regarding CQRS and Event sourcing">
          <i class="none"></i>
        Tutorial regarding CQRS and Event sourcing</a>
            </li>
                  
      <li>
    
                          <a href="parent/dbc/index.html" title="Tutorial Design by Contract">
          <i class="none"></i>
        Tutorial Design by Contract</a>
            </li>
                  
      <li>
    
                          <a href="parent/ddd/index.html" title="Tutorial Domain Driven Design">
          <i class="none"></i>
        Tutorial Domain Driven Design</a>
            </li>
                  
      <li>
    
                          <a href="parent/rest/index.html" title="Tutorial Rest">
          <i class="none"></i>
        Tutorial Rest</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                                                                                                                                                                        
      <li>
    
                          <a href="project-info.html" title="Project Information">
          <i class="icon-chevron-right"></i>
        Project Information</a>
                  </li>
            </ul>
                
                    
                
          <hr class="divider" />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <h1>Cache</h1>
<p>Repetitious access to remote resources or global <a href="ddd/value-objects.md">value objects</a> form a bottleneck for many services. Caching is a technique that can drastically improve the performance. For example by avoiding multiple read operations for the same data.</p>
<p>However there is a price, caching data that the application is accessing will increase the memory usage. Therefore it is very important to obtain a proper balance between the retrieval of the data and the memory usage. The quantity of data being cached and the moment when to load, either in the beginning when the application initializes or whenever it is required for the first time, depends on the requirements of the application.</p>
<p>The cache will identify the buffered resources using unique identifiers. When the resources stored in the cache are no longer required they could be released in order to lower the memory consumption.</p>
<p>Basically there are 2 main caching strategies: Primed and Demand cache.</p>
<p>A cache that is initialized from the beginning with default values is primed cache. A primed cache should be considered whenever it is possible to predict a subset or the entire set of data that the client will request, and to put it to the cache. In case the client request data with a key that matches one of the primed keys having no corresponding data in the cache it is assumed that there is no data in the datasource for that key as well. Disadvantage of primed cache is that it takes longer for the application to start-up and become functional. There is however a hidden disadvantage and that is that developers assume that the cache will always be populated and that it will always be populated with the entire data set. This assumption could lead to a disaster for your application because:</p>

<ul>
  
<li>the logic to detect cache misses and fetch individual items on a miss never gets written or is written badly.</li>
  
<li>Nothing can ever be evicted from the cache.</li>
  
<li>Operations has no options to cleanup when faced with memory or data consistency issues in production.</li>
</ul>
<p>Draw back of not using a primed cache is that when the application is cold and the cache is empty grabbing data from the datastore is inefficient. A solution to bypass the problems as described above is to provide cache miss logic to operate on sets of identifiers beside the single identifier logic. Now, when the system starts, spawn a couple of workers that fetch ids from the resource (in configurable batch sizes) and insert those in the cache. This way you:</p>

<ul>
  
<li>Ensure that code no longer make assumptions about all data being in cache at all times.</li>
  
<li>Caches still get filled close to application start, but clients aren&#x2019;t held back by it.</li>
  
<li>Cache warming code and normal get-miss-fetch scenarios share the same code.</li>
</ul>
<p>Demand cache loads information and stores it in cache whenever the information is requested by the system. A demand cache implementation will improve performance while running. A demand cache should be considered whenever populating the cache is either unfeasible of unnecessary.</p>
<p>Object which are applicable for caching are:</p>

<ul>
  
<li>Results of database queries</li>
  
<li>XML message</li>
  
<li>Results of I/O</li>
  
<li>Any other object that is expensive to get.</li>
  
<li>Any object that is mostly read.</li>
</ul>
<p>A cache requires: * max cache size - Defines how many elements a cache can hold * eviction policies - Defines what to do when the number of elements in cache exceeds the max cache size. The Least Recently Used (LRU) works best. Policies like MRU, LFU, etc, are usually not applicable in most practical situations and are expensive from performance point of view. * Time to live - Defines time after that a cache key should be removed from the cache (expired). * statistics Professional caches like <a class="externalLink" href="http://ehcache.org/">EHCache</a> or <a class="externalLink" href="https://code.google.com/p/guava-libraries/wiki/CachesExplained">Guava Cache</a> provide this kind of functionality out of the box and are constantly tested.</p>
<div class="section">
<h2>See also<a name="See_also"></a></h2>

<ul>
  
<li><a class="externalLink" href="http://en.wikipedia.org/wiki/Distributed_cache">Distributed cache</a> - a distributed cache is an extension of the traditional concept of cache used in a single locale. A distributed cache may span multiple servers so that it can grow in size and in transactional capacity. Distributed cache might be interesting in case of demand cache since it will fill up quicker.</li>
  
<li><a class="externalLink" href="http://docs.spring.io/spring/docs/4.0.2.RELEASE/spring-framework-reference/htmlsingle/#cache">Spring Cache Abstraction</a></li>
  
<li><a class="externalLink" href="https://docs.jboss.org/hibernate/orm/4.3/manual/en-US/html_single/#performance-cache">Hibernate 2nd level cache</a></li>
</ul></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
              <div class="row span12">Copyright &copy;                    2015
                        <a href="http://www.uniknow.org">UniKnow</a>.
            All Rights Reserved.      
                    
      </div>

        
        
                </div>
    </footer>
  </body>
</html>
